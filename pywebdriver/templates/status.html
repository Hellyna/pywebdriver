<!DOCTYPE HTML>
<!-- ********************************************************************** -->
<!--    PyWebDriver Software                                                -->
<!--    Copyright (C) 2014-TODAY Akretion <http://www.akretion.com>         -->
<!--    @author Sylvain LE GAL (https://twitter.com/legalsylvain)           -->

<!--This program is free software: you can redistribute it and/or modify    -->
<!--it under the terms of the GNU Affero General Public License as          -->
<!--published by the Free Software Foundation, either version 3 of the      -->
<!--License, or (at your option) any later version.                         -->

<!--This program is distributed in the hope that it will be useful,         -->
<!--but WITHOUT ANY WARRANTY; without even the implied warranty of          -->
<!--MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           -->
<!--GNU Affero General Public License for more details.                     -->

<!--You should have received a copy of the GNU Affero General Public License-->
<!--along with this program.  If not, see <http://www.gnu.org/licenses/>.   -->
<!-- ********************************************************************** -->

{% extends "layout.html" %}

{% block page_title %}{{ _('Status')}}{% endblock %}

{% block content_title %}{{ _('Hardware Status')}}{% endblock %}

{% block content %}
        <p>{{ _('The list of enabled drivers and their status')}}</p>
    {% for driver in drivers_info %}
    <div class="col-xs-4 col-md-4 thumbnail" style="margin-right:5px;">
        <h2 style="text-align:center">{{driver}}</h2>
        <div style="height:20px;">{{_('status: ')}}
        {% if drivers_info[driver]['state']['status']== 'connected' %}
            <span style="color:green;">{{ _('Connected')}}</span>
        {% elif drivers_info[driver]['state']['status']== 'connecting' %}
            <span style="color:blue;">{{driver}} : {{ _('Connecting')}}</span>
        {% elif drivers_info[driver]['state']['status']== 'disconnected' %}
            <span style="color:brown;">{{driver}} : {{ _('Disconnected')}}</span>
        {% elif drivers_info[driver]['state']['status']== 'error' %}
            <span style="color:red;">{{driver}} : {{ _('Error')}}</span>
        {% else %}
            <span style="color:black;">{{driver}} : {{drivers_info[driver]['state']['status']}}</span>
        {% endif %}
        {% if driver =='escpos' %}
                {% if drivers_info[driver]['state']['status']  == 'connected' %}
                    <button type="button" onclick="print_status()" class="btn btn-link btn-xs">{{_('Print Status Receipt')}}</button>
                {% endif %}
        {% endif %}
        </div>

        {% if drivers_info[driver]['image'] %}
            <img src="{{drivers_info[driver]['image']}}" style="width:150px;height:150px;" class="thumbnail img-responsive" />
        {% else %}
            <img src="{{ url_for('static', filename='images/device_not_found.jpg') }}" style="width:150px;height:150px;" class="thumbnail img-responsive" />
        {% endif %}
        <div style="height:80px">
                <ul class="list-group">
        {% for message in drivers_info[driver]['state']['messages'] %}
                <li class="list-group-item list-group-item-danger">{{message}}</li>
        {% endfor %}
                </ul>
        </div>
    </div>
    {% endfor %}
    <script>
        function print_status(){
            $.ajax({
                url: "print_status.html",
                type: "GET",
                timeout: 1000,
            })
        }
    </script>
{% endblock %}
